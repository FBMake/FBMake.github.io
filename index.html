<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr">
    <head>
        



        <meta charset="utf-8">
        <title>Zone VFHN Rouen</title>
        <link rel="stylesheet" href="./CSS/app.css">
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
        <link rel="icon" type="image/svg" href="./src/favicon-32x32.png">
        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

        <link href="https://fonts.googleapis.com/css?family=Open+Sans|Roboto" rel="stylesheet">

        <!-- Load Esri Leaflet from CDN -->
        <script
          src="https://unpkg.com/esri-leaflet@2.3.3/dist/esri-leaflet.js"
          integrity="sha512-cMQ5e58BDuu1pr9BQ/eGRn6HaR6Olh0ofcHFWe5XesdCITVuSBiBZZbhCijBe5ya238f/zMMRYIMIIg1jxv4sQ=="
          crossorigin=""
        ></script>

        <!-- Load Esri Leaflet Geocoder from CDN -->
        <link
          rel="stylesheet"
          href="https://unpkg.com/esri-leaflet-geocoder@2.3.2/dist/esri-leaflet-geocoder.css"
          integrity="sha512-IM3Hs+feyi40yZhDH6kV8vQMg4Fh20s9OzInIIAc4nx7aMYMfo+IenRUekoYsHZqGkREUgx0VvlEsgm7nCDW9g=="
          crossorigin=""
        />
        <script
          src="https://unpkg.com/esri-leaflet-geocoder@2.3.2/dist/esri-leaflet-geocoder.js"
          integrity="sha512-8twnXcrOGP3WfMvjB0jS5pNigFuIWj4ALwWEgxhZ+mxvjF5/FBPVd5uAxqT8dd2kUmTVK9+yQJ4CmTmSg/sXAQ=="
          crossorigin=""
        ></script>

        <!-- Load Easy Button -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
        <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

    </head>

    <body onload="initialize()">
      <nav>
        <div class="navHead">
            <H2>VFHN</H2>
            <div class="buttonMenu">
                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                  viewBox="0 0 283.535 283.535" style="enable-background:new 0 0 283.535 283.535;" xml:space="preserve">
                  <g>
                    <path d="M40.687,101.082C18.252,101.082,0,119.333,0,141.768s18.252,40.686,40.687,40.686s40.686-18.251,40.686-40.686
                      S63.121,101.082,40.687,101.082z M40.687,164.453c-12.51,0-22.687-10.177-22.687-22.686s10.177-22.686,22.687-22.686
                      c12.509,0,22.686,10.177,22.686,22.686S53.195,164.453,40.687,164.453z"/>
                    <path d="M141.768,101.082c-22.435,0-40.686,18.251-40.686,40.686s18.251,40.686,40.686,40.686s40.686-18.251,40.686-40.686
                      S164.202,101.082,141.768,101.082z M141.768,164.453c-12.509,0-22.686-10.177-22.686-22.686s10.177-22.686,22.686-22.686
                      s22.686,10.177,22.686,22.686S154.276,164.453,141.768,164.453z"/>
                    <path d="M242.849,101.082c-22.435,0-40.686,18.251-40.686,40.686s18.251,40.686,40.686,40.686s40.687-18.251,40.687-40.686
                      S265.283,101.082,242.849,101.082z M242.849,164.453c-12.509,0-22.686-10.177-22.686-22.686s10.177-22.686,22.686-22.686
                      c12.51,0,22.687,10.177,22.687,22.686S255.358,164.453,242.849,164.453z"/>
                  </g>
                </svg>
              </div>
        </div>
        <ul class="menu">
            <li><a href="index.html">Rouen</a></li><li><a href="lehavre.html">Le Havre</a></li>
        </ul>
      </nav>

      <div id="map" class="map-div"></div>

    </body>
    <script src="JS/main.js"></script>
    <script type="text/javascript">
      function initialize() {
  
  
          var map = L.map('map').setView([49.369987, 1.094129], 8); // LIGNE 18
  
          var osmLayer = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', { // LIGNE 20
              attribution: '© OpenStreetMap contributors',
              maxZoom: 19,
              minZoom: 8
          });
  
          map.addLayer(osmLayer);
          //map.locate({setView: true, maxZoom: 12});
  
          var VFico = L.icon({
              iconUrl: "src/VFIco.png",
              shadowUrl: "src/VFIco-shadow.png",
              iconSize: [38, 37],
              shadowSize:   [76, 29],
              shadowAnchor: [20, 10]
          });
  
          //search tool
  
          const searchControl = L.esri.Geocoding.geosearch().addTo(map);
  
          const results = L.layerGroup().addTo(map);
  
          let markers = [];
  
          searchControl.on("results", function (data) {
            markers = [];
            results.clearLayers();
            console.log(data.text);
            // several results as several towns with same name (like)
            for (var i = data.results.length - 1; i >= 0; i--) {
              const result = data.results[i];
              const marker = L.marker(result.latlng);
              markers = [...markers, L.marker(marker)];
              results.addLayer(marker.bindPopup(data.text));
            }
          });
          
          
          //Bp localisation
  
          L.easyButton('<img src="src/localisation.png">', function(btn, map){
              map.locate({setView: true, maxZoom: 12});
          }).addTo(map);
  
          //VFHN Marker
  
          L.marker([49.369900, 1.094159], { icon: VFico }).addTo(map).bindPopup('VHFN Rouen');
  
          var Z9 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 90000}).addTo(map).bindPopup('Zone 09'),
  
          Z8 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 80000}).addTo(map).bindPopup('Zone 08'),
  
          Z7 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 70000}).addTo(map).bindPopup('Zone 07'),
  
          Z6 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 60000}).addTo(map).bindPopup('Zone 06'),
  
          Z5 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 50000}).addTo(map).bindPopup('Zone 05'),
  
          Z4 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 40000}).addTo(map).bindPopup('Zone 04'),
  
          Z3 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 30000}).addTo(map).bindPopup('Zone 03'),
  
          Z2 = L.circle([49.369900, 1.094159], {color: "blue",opacity: 0.2,fillOpacity: 0, radius: 20000}).addTo(map).bindPopup('Zone 02'),
  
          Z1 = L.circle([49.369900, 1.094159], {color: "#f03",opacity: 0.2,fillOpacity: 0, radius: 10000}).addTo(map).bindPopup('Zone 01');
  
          function onLocationFound(e) {
              var radius = e.accuracy;
  
              L.marker(e.latlng).addTo(map).bindPopup("Vous êtes ici");
  
  
          }
          map.on('locationfound', onLocationFound);
  
          function onLocationError(e) {
              alert("Vous avez refusé la localisation !");    //e.message
          }
  
          map.on('locationerror', onLocationError);
  
      }
    </script>
</html>

